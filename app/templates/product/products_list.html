{# templates/product/products_list.html #}
{% extends 'base.html' %}

{% block title %}Продукти{% endblock title %}

{% block content %}
    <div class="row">
        <div class="col">
            <a href="{{ url_for('product.add_product') }}" class="btn btn-primary mb-3">Додати продукт</a>
        </div>
    </div>

    <div class="row">
        <div class="col">

            {# Keep search/filter form exactly on the page (AJAX will intercept submit) #}
            <form method="get" class="row g-2 align-items-end mb-3">
                <div class="col-md-3">
                    <label for="name-q" class="form-label">Пошук за назвою</label>
                    <input id="name-q" name="q" class="form-control" placeholder="напр. Кулон"
                           value="{{ filters.q }}">
                </div>

                <div class="col-md-2">
                    <label for="per_page" class="form-label">Per page</label>
                    <select id="per_page" name="per_page" class="form-select">
                        {% for n in [10,20,50,100] %}
                            <option value="{{ n }}" {% if filters.per_page==n %}selected{% endif %}>{{ n }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="col-md-2 d-flex gap-2">
                    {# Clear filters: link to same page with no params #}
                    <a class="btn btn-outline-secondary" href="{{ url_for('product.products_list') }}">
                        Reset
                    </a>
                </div>
            </form>

            {# AJAX target container: table+pagination HTML gets swapped in here #}
            <div id="productsContainer" class="mx-auto">
                {% include "product/_products_table.html" %}
            </div>

        </div>
    </div>
{% endblock content %}

{% block scripts %}
    <script src="{{ url_for('static', filename='js/product/products_list.js') }}"></script>
{% endblock scripts %}
